<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smallo Display</title>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: sans-serif;
      background: #000;
    }

    /* ===== MAIN LAYOUT ===== */
    #container {
      display: flex;
      width: 100%;
      height: 100%;
    }

    /* LEFT SIDE (MENU) */
    #leftPane {
      width: 50%;
      background: #6b8e6e;
      padding: 12px;
      box-sizing: border-box;
      overflow: hidden;
    }

    /* RIGHT SIDE */
    #rightPane {
      width: 50%;
      display: flex;
      flex-direction: column;
    }

    /* SMALLO AREA */
    #smalloPane {
      flex: 1;
      background: #fff5e1;
      position: relative;
      overflow: hidden;
    }

    video.smalloVid {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      background: transparent;
    }

    /* ===== PRODUCT PREVIEW (ONLY NEW/CHANGED PART) ===== */
    #productPreview {
      flex: 1;
      position: relative;
      overflow: hidden;
      background: #000;
    }

    .productImg {
      position: absolute;
      inset: 0;
      margin: auto;
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      transition: opacity 0.6s ease;
    }
  </style>
</head>

<body>
  <div id="container">

    <!-- LEFT: CANVA MENU (UNCHANGED) -->
    <div id="leftPane">
      <div style="position: relative; width: 100%; height: 0; padding-top: 125.0000%;
        padding-bottom: 0; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16);
        margin-top: 1.6em; margin-bottom: 0.9em; overflow: hidden;
        border-radius: 8px; will-change: transform;">
        <iframe loading="lazy"
          style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0; margin: 0;"
          src="https://www.canva.com/design/DAHA6CJLYFc/pb-pX-AMcbC9I1zxRAJEAg/view?embed"
          allowfullscreen="allowfullscreen" allow="fullscreen">
        </iframe>
      </div>
    </div>

    <!-- RIGHT SIDE -->
    <div id="rightPane">

      <!-- SMALLO -->
      <div id="smalloPane">
        <video id="idleVid" class="smalloVid" autoplay muted loop playsinline></video>
        <video id="actionVid" class="smalloVid" autoplay muted playsinline style="opacity:0"></video>
      </div>

      <!-- PRODUCT PREVIEW (CROSSFADE) -->
      <div id="productPreview">
        <img id="imgA" class="productImg" src="product-previews/1.png">
        <img id="imgB" class="productImg" src="product-previews/2.png" style="opacity:0">
      </div>

    </div>
  </div>

  <script>
    /* ===== FIREBASE (UNCHANGED) ===== */
    const firebaseConfig = {
      apiKey: "AIzaSyC7FVnMrkhPIF3fJE0JZEmwjDALSFc7SFc",
      authDomain: "smallo-live.firebaseapp.com",
      databaseURL: "https://smallo-live-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "smallo-live",
      storageBucket: "smallo-live.firebasestorage.app",
      messagingSenderId: "1017470725882",
      appId: "1:1017470725882:web:929ee126247fcbb51e6343",
      measurementId: "G-QTZTK6G2XL"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    /* ===== SMALLO LOGIC (UNCHANGED PLACEHOLDER) ===== */
    const idleVid = document.getElementById("idleVid");
    const actionVid = document.getElementById("actionVid");

    idleVid.src = "videos/idle.mp4";
    idleVid.play();

    /* ===== PRODUCT PREVIEW CROSSFADE (ONLY NEW LOGIC) ===== */
    const productImgs = [
      "product-previews/1.png",
      "product-previews/2.png",
      "product-previews/3.png",
      "product-previews/4.png",
      "product-previews/5.png"
    ];

    let pIdx = 0;
    let showingA = true;

    const imgA = document.getElementById("imgA");
    const imgB = document.getElementById("imgB");

    setInterval(() => {
      pIdx = (pIdx + 1) % productImgs.length;

      const incoming = showingA ? imgB : imgA;
      const outgoing = showingA ? imgA : imgB;

      incoming.src = productImgs[pIdx];
      incoming.style.opacity = 1;
      outgoing.style.opacity = 0;

      showingA = !showingA;
    }, 4000);
  </script>
</body>
</html>
