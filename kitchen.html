<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smallo Kitchen</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#583621;
  color:white;
}

header{
  background:#6b8e6e;
  padding:15px;
  text-align:center;
  font-size:22px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
  gap:15px;
  padding:15px;
}

.card{
  background:#FFF5E1;
  color:black;
  padding:10px;
  border-radius:10px;
}

button{
  margin-top:10px;
  padding:8px;
  width:100%;
  background:#6b8e6e;
  border:none;
  border-radius:8px;
  color:white;
}
</style>
</head>
<body>

<header>üç≥ Kitchen Orders</header>
<div class="grid" id="ordersGrid"></div>

<script>
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyC7FVnMrkhPIF3fJE0JZEmwjDALSFc7SFc",
  authDomain: "smallo-live.firebaseapp.com",
  databaseURL: "https://smallo-live-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "smallo-live",
  storageBucket: "smallo-live.firebasestorage.app",
  messagingSenderId: "1017470725882",
  appId: "1:1017470725882:web:929ee126247fcbb51e6343",
  measurementId: "G-QTZTK6G2XL"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const grid = document.getElementById("ordersGrid");

db.ref("orders").on("value",snap=>{
  grid.innerHTML="";
  snap.forEach(child=>{
    const data = child.val();
    const card = document.createElement("div");
    card.className="card";

    let itemsHTML="";
    data.items.forEach(i=>{
      itemsHTML+=`<div>${i.item} (${i.size})</div>`;
    });

    card.innerHTML=`
      <h3>#${data.orderNumber}</h3>
      ${itemsHTML}
      <div><strong>Total: ‚Ç±${data.total}</strong></div>
      <button onclick="complete('${data.orderNumber}')">Mark Completed</button>
    `;

    grid.appendChild(card);
  });
});

function complete(orderNum){
  const orderRef = db.ref("orders/"+orderNum);
  orderRef.once("value",snap=>{
    db.ref("completedOrders/"+orderNum).set({
      ...snap.val(),
      completedAt:Date.now()
    });
    orderRef.remove();
  });
}
</script>

</body>
</html>
 
